# -*- coding: utf-8 -*-
"""DJ_RADYO.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1goCUE04eW017fQ2w3b7beRAwPCrPZBO_
"""

!pip install gradio transformers

import random
import gradio as gr
from transformers import AutoTokenizer, AutoModelForSeq2SeqLM
from google.colab import drive
import torch


# === DRIVE BAÄLANTISI ===
drive.mount('/content/drive')

# === DJ MODELÄ°NÄ° YÃœKLE ===
dj_model_path = "/content/drive/MyDrive/dj_model_flan_t51"
tokenizer = AutoTokenizer.from_pretrained(dj_model_path, local_files_only=True)
model = AutoModelForSeq2SeqLM.from_pretrained(dj_model_path, local_files_only=True)

# === DUYGU VERÄ°LERÄ° ===
duygu_etiketleri = [
    "hÃ¼zÃ¼nlÃ¼", "mutlu", "aÅŸÄ±k", "sinirli", "enerjik", "yalnÄ±z",
    "nostaljik", "yorgun", "motive", "saygÄ±lÄ±", "kaygÄ±lÄ±"
]

renk_ve_anlam = {
    "hÃ¼zÃ¼nlÃ¼": ("mavi", "#4A90E2"),
    "mutlu": ("turkuaz", "#30E3CA"),
    "aÅŸÄ±k": ("kÄ±rmÄ±zÄ±", "#FF3B3F"),
    "sinirli": ("mor", "#8E44AD"),
    "enerjik": ("sarÄ±", "#F1C40F"),
    "yalnÄ±z": ("siyah", "#1C1C1C"),
    "nostaljik": ("kahverengi", "#A0522D"),
    "yorgun": ("beyaz", "#FFFFFF"),
    "motive": ("turuncu", "#FFA500"),
    "kaygÄ±lÄ±": ("yeÅŸil", "#6B8E23"),
    "saygÄ±lÄ±": ("lacivert", "#1F3A93")
}

renk_anlamlari = {
    "sarÄ±": "GeÃ§iciliÄŸi ve dikkati simgeler.",
    "mavi": "Sakinlik ve huzur anlamÄ±na gelir.",
    "siyah": "GÃ¼Ã§, hÄ±rs ve yas anlamÄ± taÅŸÄ±r.",
    "kahverengi": "Samimiyet ve hareketliliÄŸi ifade eder.",
    "turuncu": "Enerji, mutluluk ve coÅŸkuyu yansÄ±tÄ±r.",
    "beyaz": "SaflÄ±k ve masumiyeti simgeler.",
    "kÄ±rmÄ±zÄ±": "Tutku, sÄ±caklÄ±k ve gÃ¼cÃ¼ ifade eder.",
    "mor": "Asalet ve zenginliÄŸi temsil eder.",
    "yeÅŸil": "Umut, gÃ¼ven ve huzur anlamÄ±na gelir.",
    "lacivert": "Otorite ve gÃ¼ven hissi verir.",
    "turkuaz": "Mutluluk ve canlÄ±lÄ±ÄŸÄ± temsil eder."
}

# === MOD KALIPLARI ===
mod_kaliplar = [
    "BugÃ¼n hislerine bakÄ±lÄ±rsa modun sanÄ±rÄ±m",
    "SanÄ±rÄ±m ÅŸu anda modun",
    "DuygularÄ±na gÃ¶re modun",
    "Tahminime gÃ¶re bugÃ¼n senin modun",
    "Hissediyorum ki bugÃ¼n modun",
    "Bana gÃ¶re bugÃ¼n tam olarak modun",
    "Ruh halin bence",
    "Galiba modun ÅŸu anda",
    "Bu satÄ±rlarÄ±n alt metni",
    "Åu anki enerjin bana"
]

# === ANONS BAÅLANGIÃ‡ VE BÄ°TÄ°Å KALIPLARI ===
basliklar = [
    "ğŸ™ï¸ DJ kabininden tÃ¼m frekanslara selam! Ruhunla aynÄ± tondayÄ±z.",
    "ğŸ“» 94.5 DJ Radyoâ€™da duygularÄ±n ses bulduÄŸu yerdeyiz.",
    "ğŸ§ Kalbinin frekansÄ±nÄ± yakaladÄ±k... Åimdi DJ zamanÄ±!",
    "ğŸµ Ä°Ã§indeki notalara dokunan bir yolculuk baÅŸlÄ±yor!",
    "ğŸŒ€ Hislerinin ritmini yakaladÄ±k, sÄ±radaki parÃ§a sana Ã¶zel!",
    "ğŸŒ™ Geceye eÅŸlik eden tÄ±nÄ±larla sessizliÄŸi mÃ¼ziÄŸe Ã§eviriyoruz.",
    "ğŸ”¥ Ruh halin bu yayÄ±nda sese dÃ¶nÃ¼ÅŸtÃ¼! DJ Radyoâ€™da bir baÅŸka gecedeyiz.",
    "âœ¨ Hissetmeye cesaret et! Ritimle baÅŸlayan bir yolculuk baÅŸlÄ±yor.",
    "ğŸ’¿ Kalbinin attÄ±ÄŸÄ± ritimdeyiz... SÄ±radaki parÃ§a senin yansÄ±man.",
    "ğŸšï¸ DJ mikserde, sen duygularÄ±nda... Åimdi sesin tam ortasÄ±ndayÄ±z!"
]

bitisler = [
    "ğŸ¶ Åimdi radyonun sesini biraz daha aÃ§, Ã§Ã¼nkÃ¼ bu daha baÅŸlangÄ±Ã§!",
    "ğŸ”Š SakÄ±n ayrÄ±lma! Bu ritim gece boyu seninle olacak.",
    "ğŸ“¡ DJ Radyo yayÄ±nda kal, Ã§Ã¼nkÃ¼ frekanslar seni anlatÄ±yor.",
    "âœ¨ Bu sadece bir giriÅŸ... Ruhunun hikayesi mÃ¼zikle devam ediyor!",
    "ğŸ¼ SÄ±radaki parÃ§a hislerini serbest bÄ±rakacak... HazÄ±r ol!",
    "ğŸŒŸ Ruhunu notalara bÄ±rak, DJ Radyo hep seninle.",
    "ğŸ§ Ritim yÃ¼kseliyor! DJâ€™le kal, tempo seninle yarÄ±ÅŸsÄ±n.",
    "ğŸª DuygularÄ±na Ã¶zel frekanslardayÄ±z... Tekrar buluÅŸmak Ã¼zere!",
    "ğŸ“€ KulaklÄ±k sende, kontrol bizde... MÃ¼ziÄŸin kalbinde gÃ¶rÃ¼ÅŸÃ¼rÃ¼z!",
    "ğŸ¤ Mikrofondan kalbine uzanan bir yolculuÄŸa daha az sonra devam!"
]

# === ÅARKI VERÄ°TABANI ===

sarki_veritabani = {

    "hÃ¼zÃ¼nlÃ¼": [
        ("Ahmet Kaya - Kum Gibi", "https://open.spotify.com/track/5sNESr6pQfIhL3krM8CtZn"),
        ("Sezen Aksu - GÃ¼lÃ¼mse", "https://open.spotify.com/track/3dWLnU94Yf5EX6w54N0vft"),
        ("Cem Adrian - YalnÄ±zlÄ±k", "https://open.spotify.com/track/4uYzxd0W7UOHkMo7G5fK9o"),
        ("ManuÅŸ Baba - EteÄŸi Belinde", "https://open.spotify.com/track/6Rwl8VWBYkcKU8aD0vWYRB"),
        ("Teoman - Kupa KÄ±zÄ± ve Sinek Valesi", "https://open.spotify.com/track/7s5L2HQI9iYjA2Jssm9Rre"),
        ("Feridun DÃ¼zaÄŸaÃ§ - Lavinya", "https://open.spotify.com/track/0XpdGFGcV48qN3oUNrWiTT"),
        ("Fikri Karayel - Yol", "https://open.spotify.com/track/0NaidDHuhrUlaKFLfp0XUi"),
        ("Melike Åahin - Sevmek SuÃ§sa SuÃ§luyum", "https://open.spotify.com/track/0BAI3tbiBNu8ZQZUZhfw7A"),
        ("Mabel Matiz - A CanÄ±m", "https://open.spotify.com/track/0oJY8cps2Z71N9w0yLmQgf"),
        ("Gripin - Durma YaÄŸmur Durma", "https://open.spotify.com/track/4q3U8Mum6wl1Z2VjXivvTk")
    ],
    "mutlu": [
        ("Tarkan - ÅÄ±marÄ±k", "https://open.spotify.com/track/2WzWqVs2Yh0ZTfPikYpWIZ"),
        ("Kenan DoÄŸulu - Ã‡akkÄ±dÄ±", "https://open.spotify.com/track/1o5RtFKEJH1tU3cyZKXjCx"),
        ("Nil Karaibrahimgil - Ben Buraya Ã‡Ä±plak Geldim", "https://open.spotify.com/track/0cHRN4O1s3mt0IOLiTJpG0"),
        ("Athena - ArsÄ±z GÃ¶nÃ¼l", "https://open.spotify.com/track/7IP5Fq3F09iLgCP6reUrVR"),
        ("MFÃ– - Ele GÃ¼ne KarÅŸÄ±", "https://open.spotify.com/track/0smAAirKoLoehnVYBo2L7m"),
        ("Kiss - I Was Made For Lovin' You ", "https://open.spotify.com/intl-tr/track/07q0QVgO56EorrSGHC48y3?si=f65426af566547a5"),
        ("Mor ve Ã–tesi - Bir Derdim Var", "https://open.spotify.com/track/6IdCHwfh5kbE3cKmFqCSx5"),
        ("Hande Yener - KÄ±rmÄ±zÄ±", "https://open.spotify.com/track/6RX5iFmyQjRpgO1xGJ5L9T"),
        ("Ajda Pekkan - Yakar GeÃ§erim", "https://open.spotify.com/track/4vq2SvLKHHM1bCNiTf9yFr"),
        ("GÃ¶ksel - DepresyondayÄ±m", "https://open.spotify.com/track/4NHmNIFezcyV7nFeKZCMRH"),
        ("Athena - Senden, Benden, Bizden", "https://open.spotify.com/track/2pYHyEVRuMdn4ImLaBPKY5")
    ],
    "aÅŸÄ±k": [
        ("YalÄ±n - Bir BakmÄ±ÅŸsÄ±n", "https://open.spotify.com/track/5a9bV2xC6Ab7Rk8NV7OfIP"),
        ("Emre AydÄ±n - Belki Bir GÃ¼n Ã–zlersin", "https://open.spotify.com/track/3uA5LnZ4nLwF2rVRUMi30a"),
        ("Tuna KiremitÃ§i - Bu AÅŸk Burada Biter", "https://open.spotify.com/track/0Zq04yAFYJr7rkOhmDZKDr"),
        ("Kalben - Sadece", "https://open.spotify.com/track/4Z9Drs6dp0QF1G13wLChPw"),
        ("Mabel Matiz - GÃ¶k Nerede", "https://open.spotify.com/track/6NnOgo2vNnMk8cJmo7r3Mw"),
        ("Edis - MartÄ±lar", "https://open.spotify.com/track/63g9ucLfjz2YKMzpxLysJ9"),
        ("SÄ±la - Yan Benimle", "https://open.spotify.com/track/4NVoaVJoPZo3JOGK9VmYnc"),
        ("NilÃ¼fer - Son Perde", "https://open.spotify.com/track/0B1LFqOn2bbAOKWYIoFHZj"),
        ("FenerbahÃ§eliler - Lacivert Olmadan SarÄ± Sevilmez ", "https://open.spotify.com/intl-tr/track/5m0XSgInSBejkOyO4Fk59u?si=cc2e2dd6d7f54686"),
        ("Sertab Erener - AÃ§Ä±k Adres", "https://open.spotify.com/track/0dL2BDkxl5z6zM6tMKLbDr"),
        ("Duman - Elleri Ellerime", "https://open.spotify.com/track/4u6EQz7w5CWwbHu4rhIuXy")
    ],
    "sinirli": [
        ("maNga - Beni Benimle BÄ±rak", "https://open.spotify.com/track/5jyiF1DeNVzP5PBcLMxyZ2"),
        ("Mor ve Ã–tesi - Cambaz", "https://open.spotify.com/track/7pTnXzy3zzmtBOOvIczm4d"),
        ("Hayko Cepkin - Melekler", "https://open.spotify.com/track/1CCayHgCFFxPBwGzltChfG"),
        ("Duman - Belki AlÄ±ÅŸman LazÄ±m", "https://open.spotify.com/track/4U3A7PQbx1qR5uNHQJsb2T"),
        ("Athena - Serseri MayÄ±n", "https://open.spotify.com/track/0ObQ2dMw1yizn45RlGZKj3"),
        ("Åebnem Ferah - MayÄ±n TarlasÄ±", "https://open.spotify.com/track/4vAaQww8xMDn2mEZU7o1e6"),
        ("Kurban - Yosma", "https://open.spotify.com/track/3NKJjRYGLmNkoUZVnpR1wb"),
        ("Pentagram - Lions In A Cage", "https://open.spotify.com/track/2HTEjrPBHhzRMz8l4TBAg7"),
        ("Redd - Nefes Bile Almadan", "https://open.spotify.com/track/3D5LqZYptmFVW0Qd7xwbgN"),
        ("Cem Adrian - Sen Gel Diyorsun", "https://open.spotify.com/track/0GT0D54Ndiwwj0gEBE1a5Y")
    ],
    "enerjik": [
        ("Hadise - DÃ¼m Tek Tek", "https://open.spotify.com/track/3CJ74wGJb1ErfhCe9xH1kM"),
        ("Tarkan - Kuzu Kuzu", "https://open.spotify.com/track/4S7hnAp0uohRSMd4TrbSFL"),
        ("GÃ¼lÅŸen - BangÄ±r BangÄ±r", "https://open.spotify.com/track/6zbmY9UKiWHD91aPPvp9hz"),
        ("Aleyna Tilki - Sen Olsan Bari", "https://open.spotify.com/track/0M2JbYkZB5WrrvhzraO5cT"),
        ("Edis - Dudak", "https://open.spotify.com/track/4C0WRYvciVXN7oL6gDJswV"),
        ("Demet AkalÄ±n - Nazar", "https://open.spotify.com/track/4gbRWljOtDLZOVWJk1K3Yo"),
        ("Simge - YankÄ±", "https://open.spotify.com/track/1rVcdVxapxOhyDf7S7phb2"),
        ("Ziynet Sali - Bana da SÃ¶yle", "https://open.spotify.com/track/1ugA1nP39TiMnTTe64N7NY"),
        ("Ajda Pekkan - Ajda 1990", "https://open.spotify.com/track/5oLKMnpyXjJvOE1phGMZCz"),
        ("Sertab Erener - Rengarenk", "https://open.spotify.com/track/6NkxOSSh7nRlyDdVcz0b96"),
        ("YaÅŸar - KumralÄ±m", "https://open.spotify.com/intl-tr/track/3tCCD2qQLdC99YkRwGPSsx?si=dedf8318d62a4ddf")
    ],
    "yalnÄ±z": [
        ("Cem Adrian - YalnÄ±zlÄ±k Senden Daha Ã‡ok Seviyor Beni", "https://open.spotify.com/track/6pPhQ6AStRt8s2VG0imU2F"),
        ("ManuÅŸ Baba - Ben Sana Vurgunum", "https://open.spotify.com/track/2XvHyqMkhqvJzjU4Ox5D7E"),
        ("Gripin - YalnÄ±zlÄ±ÄŸÄ±n Ã‡aresini BulmuÅŸlar", "https://open.spotify.com/track/6rIu5MbOeaqgWMSbXHE1x6"),
        ("Teoman - Renkli RÃ¼ yalar Oteli", "https://open.spotify.com/track/2S9lOTUUfNRnBeB0Te6rxg"),
        ("Berkay - AyrÄ±lmam", "https://open.spotify.com/track/7rA6vIE9XWbyV6tk3MRVTh"),
        ("Kalben - Sadece", "https://open.spotify.com/track/4Z9Drs6dp0QF1G13wLChPw"),
        ("Candan ErÃ§etin - Yalan", "https://open.spotify.com/track/4VjBd2HodBF3HZ3liBfK0q"),
        ("Åebnem Ferah - Sil BaÅŸtan", "https://open.spotify.com/track/1BAtLNflD3yp8PSrj8pTxX"),
        ("Fikri Karayel - Bir Åehri Sevmek", "https://open.spotify.com/track/0GqaQ8Vqk6fIYPZn1FeQac"),
        ("Feridun DÃ¼zaÄŸaÃ§ - Alev Alev", "https://open.spotify.com/track/6VAsXzYo8VLz4hnT6RgQdt")
    ],
    "nostaljik": [
        ("BarÄ±ÅŸ ManÃ§o - GÃ¼lpembe", "https://open.spotify.com/track/0SVORe9xoyndIJoJbXj5eH"),
        ("MFÃ– - GÃ¼llerin Ä°Ã§inden", "https://open.spotify.com/track/2Q5vCrLfNKFzCRXKUnGT8E"),
        ("Ajda Pekkan - Yan", "https://open.spotify.com/track/6yHtd6rEbIE5aVzWQCeJEn"),
        ("Sezen Aksu - TÃ¼keneceÄŸiz", "https://open.spotify.com/track/1zdiwPqNR6yCqRoUqXjISz"),
        ("Erol Evgin - Sevdan Olmasa", "https://open.spotify.com/track/3LRVvDE0vM3ZixM3I5FguE"),
        ("NilÃ¼fer - Son Arzum", "https://open.spotify.com/track/3nWnt3DPAW7gclPi1mvExB"),
        ("Nazan Ã–ncel - Sokak KÄ±zÄ±", "https://open.spotify.com/track/2xwhBdHZ6f9HEVNuYIfNMc"),
        ("Fikret KÄ±zÄ±lok - GÃ¶nÃ¼l", "https://open.spotify.com/track/2TZgQ5gJMLaaB6rJo7tEfB"),
        ("Yeni TÃ¼rkÃ¼ - AÅŸk Yeniden", "https://open.spotify.com/track/5rl2GoL7K7G7Zz5Sx14N7g"),
        ("Tanju Okan - KadÄ±nÄ±m", "https://open.spotify.com/track/0Bg9kQ1uIv61vQqg3Ba93I"),
        ("BarÄ±ÅŸ ManÃ§o - Kara Sevda ", "https://open.spotify.com/intl-tr/track/796lBatxeJCAWV83ZnWlJT?si=4887c290bcd548c5")
    ],
    "yorgun": [
        ("Cem Adrian - Hala Senin SuÃ§un Var", "https://open.spotify.com/track/6Hw0UIEvAYPB67eQnJnpU1"),
        ("Pinhani - Beni Al", "https://open.spotify.com/track/6SnNKeTziOiY6wZgXqlzIG"),
        ("Mor ve Ã–tesi - Son Deneme", "https://open.spotify.com/track/2BJ9vOG6mE9iRE3YZ3tsnP"),
        ("Fikri Karayel - Hayal Edemezsin", "https://open.spotify.com/track/2nGLQ6Ry3qIGePYQzMiUO3"),
        ("Mabel Matiz - A CanÄ±m", "https://open.spotify.com/track/0oJY8cps2Z71N9w0yLmQgf"),
        ("Emre AydÄ±n - Git", "https://open.spotify.com/track/0qFCBhExYlEXNDBgqAQ8Gq"),
        ("BÃ¼lent OrtaÃ§gil - Bu Su HiÃ§ Durmaz", "https://open.spotify.com/track/7K5B3Y9hf5bK1X0zLFR7a5"),
        ("YaÅŸar - On Bir Ay", "https://open.spotify.com/track/4gy6KCh2RL0KInbHqNcxUW"),
        ("Mavi Sakal - Ä°ki Yol", "https://open.spotify.com/track/5ziEvShygZmt5tYlXiHVzL"),
        ("Teoman - GÃ¶nÃ¼lÃ§elen", "https://open.spotify.com/track/7HGfgYmt3DZh09rQJkpEVA")
    ],
    "motive": [
        ("Sertab Erener - Kime Diyorum", "https://open.spotify.com/track/1xd9OiEBoSfrq8FbDRFSki"),
        ("Coolie - Gangsta's Paradise ", "https://open.spotify.com/intl-tr/track/1DIXPcTDzTj8ZMHt3PDt8p?si=545097458c2a478f"),
        ("Nil Karaibrahimgil - KanatlarÄ±m Var Ruhumda", "https://open.spotify.com/track/0OVn3DfNgEJeZshXKoTck5"),
        ("Tarkan - Yolla", "https://open.spotify.com/track/0OzUuGQLhH7KmRsjvA3DyG"),
        ("Aleyna Tilki - CevapsÄ±z Ã‡Ä±nlama", "https://open.spotify.com/track/4vMOKX6jOAKuPGF4tpgjD4"),
        ("Kenan DoÄŸulu - AÅŸk ile Yap", "https://open.spotify.com/track/1AQBtFZfmsvS0ZCIGynB9o"),
        ("GÃ¶khan TÃ¼rkmen - Ã‡atÄ± KatÄ±", "https://open.spotify.com/track/1NW9Rhn9J7tGy0T1dDFEGP"),
        ("Edis - ArÄ±yorum", "https://open.spotify.com/track/1FDGZchhDPTRf5JxFaZ3og"),
        ("Bora Duran - Sana DoÄŸru", "https://open.spotify.com/track/6rcCyU1RoFapEnNgzpZDEg"),
        ("SÄ±la - Karanfil", "https://open.spotify.com/track/4fZbZ8gJKY9htI5xBdJgBa"),
        ("GÃ¶ksel - Hayat RÃ¼ya Gibi", "https://open.spotify.com/track/7AgzrgUzBKxgyZnR15N3tG")
    ],
    "kaygÄ±lÄ±": [
        ("Kalben - YaralÄ±", "https://open.spotify.com/track/0wU0rbi4xyQfTuxbCM3VO0"),
        ("Cem Adrian - Ben Sana Vurgunum", "https://open.spotify.com/track/0tZtdjcRhDsAxGbSE8hZsB"),
        ("Can Bonomo - Bardak TaÅŸtÄ±", "https://open.spotify.com/track/6f6KhRl6rDQqBCiwMbnNXY"),
        ("ManuÅŸ Baba - DeÄŸmez", "https://open.spotify.com/track/63v4U9u6MXLZIjpluipKq6"),
        ("Teoman - O", "https://open.spotify.com/track/4tDkR2NpAtRuWSMEumr94j"),
        ("Pinhani - Ne GÃ¼zel GÃ¼ldÃ¼n", "https://open.spotify.com/track/3mKJfojqAmIHKg7WiLxKxa"),
        ("Melike Åahin - Uykumun Boynunu BÃ¼kme", "https://open.spotify.com/track/0Pst6mWMr1LxP5fQ5pJkaM"),
        ("SÄ±la - Ziyan", "https://open.spotify.com/track/0T7OuyY81hzmljDLKdkNsH"),
        ("Mor ve Ã–tesi - AyÄ±p Olmaz MÄ±?", "https://open.spotify.com/track/7exkqOmuYoM0aTyycPxCgD"),
        ("Fikri Karayel - Hayal Edemezsin", "https://open.spotify.com/track/2nGLQ6Ry3qIGePYQzMiUO3")
    ]
}
def spotify_embed(link):
    track_id = link.split("/")[-1].split("?")[0]
    return f"""
    <iframe style="border-radius:12px"
            src="https://open.spotify.com/embed/track/{track_id}"
            width="100%" height="80" frameBorder="0"
            allowtransparency="true" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
            loading="lazy"></iframe>
    """

def dj_anonsu(selected_moods):
    # === DJ ANONSU ===
    prompt = "Ruh halim karmaÅŸÄ±k ama derin. DJ gibi konuÅŸ:"
    inputs = tokenizer(prompt, return_tensors="pt").to(model.device)
    output = model.generate(**inputs, max_length=64, do_sample=True, top_p=0.85, temperature=0.7)
    model_cikisi = tokenizer.decode(output[0], skip_special_tokens=True)

    baslik = random.choice(basliklar)
    bitis = random.choice(bitisler)
    anons = f"{baslik} {model_cikisi} {bitis}"

    html_blok = ""
    renk_adi_listesi = []

    for mood in selected_moods:
        mod_giris = random.choice(mod_kaliplar)
        mood_upper = mood.upper()

        # ÅARKI
        if mood in sarki_veritabani and sarki_veritabani[mood]:
            sarki_adi, sarki_link = random.choice(sarki_veritabani[mood])
            sarki_html = f"<b>ğŸµ ÅarkÄ±:</b> {sarki_adi}<br>{spotify_embed(sarki_link)}"
        else:
            sarki_html = "<i>ğŸµ Bu duygu iÃ§in ÅŸarkÄ± bulunamadÄ±.</i>"

        # RENK
        renk_adi, renk_hex = renk_ve_anlam.get(mood, ("beyaz", "#FFFFFF"))
        yazi_rengi = "black" if renk_hex.upper() == "#FFFFFF" else "white"
        renk_aciklama = renk_anlamlari.get(renk_adi, "AÃ§Ä±klama bulunamadÄ±.")
        renk_adi_listesi.append(renk_adi.upper())

        renk_html = f"""
        <div style='width:100%; background-color:{renk_hex}; color:{yazi_rengi};
        text-align:center; border-radius:8px; font-weight:bold; padding:10px; margin-top:10px'>
            ğŸ§  <i>{mod_giris} {mood_upper}.</i><br><br>
            {sarki_html}<br><br>
            ğŸŒˆ <b>Renk:</b> {renk_adi.upper()} - {renk_aciklama}
        </div>
        """
        html_blok += renk_html + "<br>"

    # RENK Ã–ZETÄ°
    if len(renk_adi_listesi) > 1:
        html_blok += f"<br><b>ğŸ¨ Sen aslÄ±nda bu renklerin bir karÄ±ÅŸÄ±mÄ±sÄ±n: {', '.join(renk_adi_listesi)}.</b>"
    elif len(renk_adi_listesi) == 1:
        html_blok += f"<br><b>ğŸ¨ BugÃ¼nkÃ¼ ruhunun rengi: {renk_adi_listesi[0]}.</b>"
    else:
        html_blok += "<b>ğŸ¨ Ruh hali seÃ§ilmedi.</b>"

    return anons, html_blok

# === GRADIO ARAYÃœZ ===
interface = gr.Interface(
    fn=dj_anonsu,
    inputs=gr.CheckboxGroup(duygu_etiketleri, label="ğŸ§  BugÃ¼nkÃ¼ ruh halini seÃ§ (birden fazla olabilir)"),
    outputs=[
        gr.Textbox(label="ğŸ™ï¸ DJ Anonsun"),
        gr.HTML(label="ğŸµ+ğŸ¨ ÅarkÄ± & Tema Ã‡Ä±ktÄ±sÄ±")
    ],
    title="ğŸ§ DJ Radyo",
    description="Ruh haline gÃ¶re DJ tarzÄ± konuÅŸma, modunu anlatan ÅŸarkÄ±lar ve renk temalarÄ± al!"
)

interface.launch()

from sklearn.metrics import f1_score, accuracy_score, precision_score, recall_score, classification_report

# === Ã–RNEK GERÃ‡EK VE TAHMÄ°N EDÄ°LEN DUYGU ETÄ°KETLERÄ° ===
gercek_etiketler = ["mutlu", "hÃ¼zÃ¼nlÃ¼", "aÅŸÄ±k", "enerjik", "yalnÄ±z"]
tahmin_edilenler = ["mutlu", "mutlu", "aÅŸÄ±k", "enerjik", "yalnÄ±z"]

# === F1 Score ===
f1 = f1_score(gercek_etiketler, tahmin_edilenler, average='macro')  # equal weight to each class
print("F1 Score (macro):", round(f1, 3))

# === DoÄŸruluk (Accuracy) ===
acc = accuracy_score(gercek_etiketler, tahmin_edilenler)
print("Accuracy:", round(acc, 3))

# === Precision ve Recall ===
precision = precision_score(gercek_etiketler, tahmin_edilenler, average='macro')
recall = recall_score(gercek_etiketler, tahmin_edilenler, average='macro')
print("Precision:", round(precision, 3))
print("Recall:", round(recall, 3))

# === DetaylÄ± Rapor ===
print("\nSÄ±nÄ±flandÄ±rma Raporu:\n")
print(classification_report(gercek_etiketler, tahmin_edilenler))